---
import { SEO } from "astro-seo";

interface Props {
  siteTitle: string;
  siteDescription: string;
  siteAuthorName: string;
  siteCreatorUsername: string;
  siteAvatarUrl: string;
  pageTitle: string;
  isHome?: boolean;
  postImage?: string;
  postDescription?: string;
  appStoreId?: string;
}

const {
  siteTitle,
  siteDescription,
  siteAuthorName,
  siteCreatorUsername,
  siteAvatarUrl,
  pageTitle,
  isHome,
  postImage,
  postDescription,
  appStoreId,
} = Astro.props;

const siteUrl = import.meta.env.SITE;
const computedTitle = isHome ? siteTitle : `${pageTitle} | ${siteTitle}`;
const isPost = postImage !== undefined && postDescription !== undefined;
---

<SEO
  charset="UTF-8"
  title={computedTitle}
  description={isPost ? postDescription : siteDescription}
  openGraph={{
    basic: {
      title: isPost ? pageTitle : computedTitle,
      type: isPost ? "article" : "website",
      image: `${siteUrl}${isPost ? postImage : siteAvatarUrl}`,
    },
    optional: {
      description: isPost ? postDescription : siteDescription,
    },
  }}
  twitter={{
    creator: `@${siteCreatorUsername}`,
    site: `@${siteCreatorUsername}`,
    description: isPost ? postDescription : siteDescription,
    image: `${siteUrl}${isPost ? postImage : siteAvatarUrl}`,
    card: "summary",
  }}
  extend={{
    link: [
      {
        rel: "icon",
        type: "image/svg+xml",
        href: "/favicon.svg",
      },
      {
        rel: "sitemap",
        href: "/sitemap-index.xml",
      },
    ],
    meta: [
      { name: "viewport", content: "width=device-width, initial-scale=1" },
      { name: "author", content: siteAuthorName },
      { name: "generator", content: Astro.generator },
    ],
  }}
/>
{
  appStoreId ? (
    <meta name="apple-itunes-app" content={`app-id=${appStoreId}`} />
  ) : null
}
